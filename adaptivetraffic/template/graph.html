<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Graphed Data</title>
    {% load static %}
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha384-Tc5IQib027qvyjSMfHjOMaLkfuWVxZxUPnCJA7l2mCWNIpG9mGCD8wGNIcPD7Txa" crossorigin="anonymous"></script>
    <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.11.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/2.7.2/Chart.js"></script>
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

</head>

<style>
    body{
        margin-top:100px;


        font-family: 'Quicksand';
    }
    @font-face { font-family: Quicksand; src: url('{% static 'fonts/Quicksand-Light.ttf' %}'); src: local('{% static 'fonts/Quicksand-Light.ttf' %}');}

    #btnData, #btnHome{
        margin-left:30px;
        margin-right:30px;
        margin-bottom:30px;

        background-color:transparent;

        width:145px;
        font-size:20px;
    }


    .chart-container {
      position: relative;
      margin: auto;
      height: 80vh;
      width: 80vw;
    }
    #title{
        font-size:50px;
        margin-top:-80px;
    }
</style>



<body>

    <div class="row">
        <div class="col-md-4"></div>
        <div class="col-md-4"><center id = "title">Traffic Load Graph</center></div>

    </div>

    <div class="row">
        <div class="col-md-12" url-endpoint='{% url "graph" %}'>
            <div class= "chart-container" >
            <canvas id="myChart" width="400" height="400"></canvas>
            <script>

                var endpoint = '/adaptivetraff/chart'
                var load= []


                $.ajax({
                    method: "GET",
                    url:endpoint,
                    success: function(data){
                        load = data.trafficLoad

                        console.log(data)

                        var ctx = document.getElementById("myChart");

                        var myChart = new Chart(ctx, {
                            type: 'line',
                            data: {
                                labels: datetime,
                                datasets: [{
                                    label: 'Load',
                                    data: electrical,

                                    backgroundColor: [
                                        'rgba(255, 99, 132, 0.2)',
                                        'rgba(54, 162, 235, 0.2)',
                                        'rgba(255, 206, 86, 0.2)',
                                        'rgba(75, 192, 192, 0.2)',
                                        'rgba(153, 102, 255, 0.2)',
                                        'rgba(255, 159, 64, 0.2)'
                                    ],
                                    borderColor: [
                                        'rgba(255,99,132,1)',
                                        'rgba(54, 162, 235, 1)',
                                        'rgba(255, 206, 86, 1)',
                                        'rgba(75, 192, 192, 1)',
                                        'rgba(153, 102, 255, 1)',
                                        'rgba(255, 159, 64, 1)'
                                    ],
                                    hoverBackgroundColor: "rgba(255,99,132,0.4)",
                                    fill: false,
                                    borderWidth: 2.5
                                }]
                            },
                            options: {
                                scales: {
                                    yAxes: [{
                                        ticks: {
                                            beginAtZero:true
                                        }
                                    }]
                                },
                                responsive: true
                            }
                        });
                        ctx.canvas.width = 1;
                        ctx.canvas.height = 1;

                    },
                    error: function(error_data){
                        console.log("error")
                        console.log(error_data)
                    }
                })

            </script>
            </div>
        </div>
    </div>



</body>
</html>